const uint8_t digit_map[]   = { 6, 35, 34, 21, 16, 17, 1, 4, 10, 40, 37, 9, 33, 18, 7, 8, 14, 36, 13, 12, 39, 38, 15, 9,  };
const uint8_t digit_map_r[]   = { 9, 15, 38, 39, 12, 13, 36, 14, 8, 7, 18, 33, 9, 37, 40, 10, 4, 1, 17, 16, 21, 34, 35, 6,  };

#define NUM_OF_DIGITS	24
#define CHARLIE	12
const uint32_t segment_mask = 0x6904fb84;
const uint32_t all_mask = 0xff27fffe;
const uint32_t spin_mask[] = {
0x01000000, 0x01040000, 0x01040080, 0x01040180, 
0x01044180, 0x09044180, 0x09046180, 0x09047180, 
0x49047180, 0x69047180, 0x6904f180, 0x6904f380, 
0x6904fb80, 0x6904fb84, 0x6904fb84, };
const uint32_t asciiA[] = {
0x00007180, 0x00003000, 0x00003100, 0x01003100, 0x4904b000, 0x21003980, 0x20003204, 0x20003300, 
0x00000204, 0x20003280, 0x00000800, 0x20000200, 0x0000a004, 0x00003100, 0x40001200, 0x01041800, 
0x09043000, 0x20000800, 0x20040880, 0x28044880, 0x40008204, 0x41001380, 0x20003000, 0x20003100, 
0x21003100, 0x41008204, 0x00000800, 0x20000200, 0x0000a004, 0x00003100, 0x40001200, 0x01041800, 
0x00000000, 0x00040080, 0x20040000, 0x20043980, 0x29003980, 0x6800ba84, 0x61006104, 0x20000000, 
0x00008004, 0x40000200, 0x6000ba04, 0x20003800, 0x00000200, 0x00003000, 0x00000800, 0x00008200, 
0x0904c380, 0x00048080, 0x01047100, 0x01041180, 0x08043080, 0x09002104, 0x09007180, 0x01040080, 
0x09047180, 0x09043180, 0x00000800, 0x20000200, 0x0000a004, 0x00003100, 0x40001200, 0x01041800, 
0x29045100, 0x09047080, 0x21041980, 0x09004100, 0x21040980, 0x09006100, 0x09006000, 0x09005180, 
0x08047080, 0x21000900, 0x00044180, 0x0800e004, 0x08004100, 0x4804c080, 0x48044084, 0x09044180, 
0x09047000, 0x09044184, 0x09047004, 0x09003180, 0x21000800, 0x08044180, 0x0800c200, 0x08044284, 
0x40008204, 0x08043180, 0x01008300, 0x09004100, 0x40000004, 0x01040180, 0x00000204, 0x00000100, 
0x40000000, 0x00006900, 0x08006104, 0x00007100, 0x00041380, 0x00006300, 0x0000b800, 0x00049180, 
0x08006800, 0x00000800, 0x20004200, 0x20008804, 0x08004000, 0x00007880, 0x00006800, 0x00007180, 
0x48006000, 0x00049080, 0x00006000, 0x00001104, 0x08006100, 0x00004180, 0x00004200, 0x00004284, 
0x40008204, 0x20041180, 0x00002300, 0x41002300, 0x20000800, 0x01009104, 0x0000b200, 0x00000000, 
0x00000000, 0x00003000, 0x00003100, 0x01003100, 0x4904b000, 0x21003980, 0x20003204, 0x0000b300, 
0x00000204, 0x20003280, 0x00000800, 0x20000200, 0x0000a004, 0x00003100, 0x40001200, 0x01041800, 
0x00007180, 0x00003000, 0x00006084, 0x00007880, 0x21002000, 0x0804a000, 0x00001980, 0x09000000, 
0x29043000, 0x29002000, 0x00000800, 0x20000200, 0x0000a004, 0x00003100, 0x40001200, 0x01041800, 
0x00000000, 0x00040080, 0x20040000, 0x20043980, 0x29003980, 0x6800ba84, 0x61006104, 0x20000000, 
0x00008004, 0x40000200, 0x6000ba04, 0x20003800, 0x00000200, 0x00003000, 0x00000800, 0x00008200, 
0x09046180, 0x20000900, 0x01043100, 0x01042180, 0x08043080, 0x01003180, 0x01007180, 0x01040080, 
0x09047180, 0x09043100, 0x20000800, 0x20000200, 0x0000a004, 0x00003100, 0x40001200, 0x01041800, 
0x29045100, 0x0800e004, 0x09005100, 0x28040080, 0x0100a200, 0x0804d280, 0x2000e900, 0x0900a000, 
0x01002100, 0x00048080, 0x0004a180, 0x01043000, 0x00040084, 0x00001300, 0x00004204, 0x00001304, 
0x00006180, 0x09044100, 0x01008200, 0x40040184, 0x60008000, 0x0804c180, 0x40008800, 0x09043000, 
0x00000304, 0x60000084, 0x00001380, 0x09004100, 0x40000004, 0x01040180, 0x00000204, 0x00000100, 
0x40000000, 0x0800e004, 0x09005100, 0x28040080, 0x0100a200, 0x0804d280, 0x2000e900, 0x0900a000, 
0x01002100, 0x00048080, 0x0004a180, 0x01043000, 0x00040084, 0x00001300, 0x00004204, 0x00001304, 
0x00006180, 0x09044100, 0x01008200, 0x40040184, 0x60008000, 0x0804c180, 0x40008800, 0x09043000, 
0x00000304, 0x60000084, 0x00001380, 0x41002300, 0x20000800, 0x01009104, 0x0000b200, 0x00000000, 
};

const uint32_t asciiB[] = {
0x09043000, 0x00003000, 0x01003000, 0x01003100, 0x00007384, 0x29003900, 0x4000b800, 0x0100b800, 
0x40008000, 0x0800b800, 0x20000000, 0x00008800, 0x40001200, 0x01003000, 0x0000a004, 0x20006100, 
0x00007180, 0x20000800, 0x28004800, 0x28044880, 0x40008204, 0x0900a104, 0x00003800, 0x01003800, 
0x01003900, 0x40008304, 0x20000000, 0x00008800, 0x40001200, 0x01003000, 0x0000a004, 0x20006100, 
0x00000000, 0x08004000, 0x00004800, 0x29007800, 0x29003980, 0x6800ba84, 0x41041904, 0x00000800, 
0x40000200, 0x00008004, 0x6000ba04, 0x20003800, 0x00008000, 0x00003000, 0x20000000, 0x00008200, 
0x0904c380, 0x08004200, 0x01047100, 0x09006100, 0x08007080, 0x41001180, 0x09043180, 0x08004100, 
0x09047180, 0x09007180, 0x20000000, 0x00008800, 0x40001200, 0x01003000, 0x0000a004, 0x20006100, 
0x01046980, 0x08047180, 0x29006900, 0x01040180, 0x29004900, 0x01041180, 0x00041180, 0x09042180, 
0x08047080, 0x21000900, 0x09044000, 0x40041280, 0x01040080, 0x08044284, 0x48044084, 0x09044180, 
0x00047180, 0x49044180, 0x40047180, 0x09003180, 0x20000900, 0x09044080, 0x00048280, 0x4804c080, 
0x40008204, 0x09007080, 0x01008300, 0x01040180, 0x40000004, 0x09004100, 0x40008000, 0x01000000, 
0x00000004, 0x21041000, 0x41041080, 0x01043000, 0x0900e000, 0x01049000, 0x20003200, 0x09006200, 
0x20041080, 0x20000000, 0x00048800, 0x60000a00, 0x00040080, 0x28043000, 0x20041000, 0x09043000, 
0x00041084, 0x08006200, 0x00041000, 0x41002000, 0x01041080, 0x09040000, 0x00048000, 0x48048000, 
0x40008204, 0x09006800, 0x01009000, 0x01009104, 0x20000800, 0x41002300, 0x0000b200, 0x00000000, 
0x00000000, 0x00003000, 0x01003000, 0x01003100, 0x00007384, 0x29003900, 0x4000b800, 0x0100b200, 
0x40008000, 0x0800b800, 0x20000000, 0x00008800, 0x40001200, 0x01003000, 0x0000a004, 0x20006100, 
0x09043000, 0x00003000, 0x48041000, 0x28043000, 0x00001900, 0x00005280, 0x29002000, 0x00000180, 
0x00007980, 0x00001980, 0x20000000, 0x00008800, 0x40001200, 0x01003000, 0x0000a004, 0x20006100, 
0x00000000, 0x08004000, 0x00004800, 0x29007800, 0x29003980, 0x6800ba84, 0x41041904, 0x00000800, 
0x40000200, 0x00008004, 0x6000ba04, 0x20003800, 0x00008000, 0x00003000, 0x20000000, 0x00008200, 
0x09045180, 0x21000800, 0x01007100, 0x09005100, 0x08007080, 0x09003100, 0x09043100, 0x08004100, 
0x09047180, 0x01007180, 0x20000800, 0x00008800, 0x40001200, 0x01003000, 0x0000a004, 0x20006100, 
0x01046980, 0x40041280, 0x01042180, 0x08004880, 0x00009300, 0x0804e280, 0x21041a00, 0x00001380, 
0x01001100, 0x08004200, 0x09005200, 0x00007100, 0x48004000, 0x0100a000, 0x40048000, 0x4100a000, 
0x09041000, 0x01044180, 0x00008300, 0x49004004, 0x00000a04, 0x09044280, 0x20000204, 0x00007180, 
0x41008000, 0x48000804, 0x0900a000, 0x01040180, 0x40000004, 0x09004100, 0x40008000, 0x01000000, 
0x00000004, 0x40041280, 0x01042180, 0x08004880, 0x00009300, 0x0804e280, 0x21041a00, 0x00001380, 
0x01001100, 0x08004200, 0x09005200, 0x00007100, 0x48004000, 0x0100a000, 0x40048000, 0x4100a000, 
0x09041000, 0x01044180, 0x00008300, 0x49004004, 0x00000a04, 0x09044280, 0x20000204, 0x00007180, 
0x41008000, 0x48000804, 0x0900a000, 0x01009104, 0x20000800, 0x41002300, 0x0000b200, 0x00000000, 
};

const uint8_t asciiOnOff[] = {
0x05, 0x02, 0x03, 0x04, 0x07, 0x07, 0x05, 0x05, 
0x02, 0x05, 0x01, 0x02, 0x03, 0x03, 0x03, 0x04, 
0x05, 0x02, 0x04, 0x06, 0x04, 0x06, 0x03, 0x04, 
0x05, 0x05, 0x01, 0x02, 0x03, 0x03, 0x03, 0x04, 
0x00, 0x02, 0x02, 0x07, 0x08, 0x0a, 0x07, 0x01, 
0x02, 0x02, 0x08, 0x04, 0x01, 0x02, 0x01, 0x02, 
0x08, 0x03, 0x06, 0x05, 0x05, 0x05, 0x07, 0x03, 
0x08, 0x07, 0x01, 0x02, 0x03, 0x03, 0x03, 0x04, 
0x07, 0x07, 0x07, 0x04, 0x06, 0x05, 0x04, 0x06, 
0x06, 0x04, 0x04, 0x05, 0x03, 0x06, 0x06, 0x06, 
0x06, 0x07, 0x07, 0x06, 0x03, 0x05, 0x04, 0x06, 
0x04, 0x06, 0x04, 0x04, 0x02, 0x04, 0x02, 0x01, 
0x01, 0x04, 0x05, 0x04, 0x05, 0x04, 0x04, 0x05, 
0x04, 0x01, 0x03, 0x04, 0x02, 0x05, 0x03, 0x05, 
0x04, 0x04, 0x02, 0x03, 0x04, 0x03, 0x02, 0x04, 
0x04, 0x05, 0x03, 0x05, 0x02, 0x05, 0x04, 0x00, 
0x00, 0x02, 0x03, 0x04, 0x07, 0x07, 0x05, 0x05, 
0x02, 0x05, 0x01, 0x02, 0x03, 0x03, 0x03, 0x04, 
0x05, 0x02, 0x04, 0x05, 0x03, 0x04, 0x04, 0x02, 
0x06, 0x04, 0x01, 0x02, 0x03, 0x03, 0x03, 0x04, 
0x00, 0x02, 0x02, 0x07, 0x08, 0x0a, 0x07, 0x01, 
0x02, 0x02, 0x08, 0x04, 0x01, 0x02, 0x01, 0x02, 
0x07, 0x03, 0x05, 0x05, 0x05, 0x05, 0x06, 0x03, 
0x08, 0x06, 0x02, 0x02, 0x03, 0x03, 0x03, 0x04, 
0x07, 0x05, 0x05, 0x04, 0x04, 0x07, 0x06, 0x04, 
0x03, 0x03, 0x05, 0x04, 0x03, 0x03, 0x03, 0x04, 
0x04, 0x05, 0x03, 0x05, 0x03, 0x06, 0x03, 0x05, 
0x03, 0x04, 0x04, 0x04, 0x02, 0x04, 0x02, 0x01, 
0x01, 0x05, 0x05, 0x04, 0x04, 0x07, 0x06, 0x04, 
0x03, 0x03, 0x05, 0x04, 0x03, 0x03, 0x03, 0x04, 
0x04, 0x05, 0x03, 0x05, 0x03, 0x06, 0x03, 0x05, 
0x03, 0x04, 0x04, 0x05, 0x02, 0x05, 0x04, 0x00, 
};

const uint32_t segment_mask_c = 0x96230e7a;
const uint32_t spin_mask_c[] = {
0x00000040, 0x04000040, 0x06000040, 0x06200040, 
0x06210040, 0x06230040, 0x06230042, 0x06230052, 
0x06230452, 0x86230452, 0x96230452, 0x96230652, 
0x9623065a, 0x9623067a, 0x96230e7a, };
const uint32_t asciiA_c[] = {
0x02210012, 0x00000012, 0x00200012, 0x00200052, 0x14020452, 0x8220005a, 0x80000232, 0x80200212, 
0x00000220, 0x82000212, 0x00000008, 0x80000200, 0x10000022, 0x00200012, 0x00000610, 0x04000058, 
0x04020052, 0x80000008, 0x86000008, 0x86030008, 0x10000620, 0x02200650, 0x80000012, 0x80200012, 
0x80200052, 0x10000660, 0x00000008, 0x80000200, 0x10000022, 0x00200012, 0x00000610, 0x04000058, 
0x00000000, 0x06000000, 0x84000000, 0x8620001a, 0x8222005a, 0x9202063a, 0x80210462, 0x80000000, 
0x10000020, 0x00000600, 0x9000063a, 0x8000001a, 0x00000200, 0x00000012, 0x00000008, 0x10000200, 
0x16230240, 0x16000000, 0x04210052, 0x06200050, 0x06020012, 0x00220062, 0x02230052, 0x06000040, 
0x06230052, 0x06220052, 0x00000008, 0x80000200, 0x10000022, 0x00200012, 0x00000610, 0x04000058, 
0x84230050, 0x06030052, 0x86200058, 0x00230040, 0x86200048, 0x00230042, 0x00030042, 0x02230050, 
0x06030012, 0x80200048, 0x06210000, 0x10030022, 0x00230000, 0x16030400, 0x06030420, 0x06230040, 
0x04030052, 0x06230060, 0x04030072, 0x02220052, 0x80000048, 0x06230000, 0x10030200, 0x06030220, 
0x10000620, 0x06220012, 0x10200240, 0x00230040, 0x00000420, 0x06200040, 0x00000220, 0x00200000, 
0x00000400, 0x0021000a, 0x00230022, 0x00210012, 0x06200210, 0x00210202, 0x1000001a, 0x16200010, 
0x0003000a, 0x00000008, 0x80010200, 0x90000028, 0x00030000, 0x0201001a, 0x0001000a, 0x02210012, 
0x00030402, 0x16000010, 0x00010002, 0x00200030, 0x00230002, 0x02210000, 0x00010200, 0x02010220, 
0x10000620, 0x86200010, 0x00200202, 0x00200642, 0x80000008, 0x10200070, 0x10000212, 0x00000000, 
0x00000000, 0x00000012, 0x00200012, 0x00200052, 0x14020452, 0x8220005a, 0x80000232, 0x10200212, 
0x00000220, 0x82000212, 0x00000008, 0x80000200, 0x10000022, 0x00200012, 0x00000610, 0x04000058, 
0x02210012, 0x00000012, 0x02010022, 0x0201001a, 0x80000042, 0x14020002, 0x02200018, 0x00020040, 
0x84020052, 0x80020042, 0x00000008, 0x80000200, 0x10000022, 0x00200012, 0x00000610, 0x04000058, 
0x00000000, 0x06000000, 0x84000000, 0x8620001a, 0x8222005a, 0x9202063a, 0x80210462, 0x80000000, 
0x10000020, 0x00000600, 0x9000063a, 0x8000001a, 0x00000200, 0x00000012, 0x00000008, 0x10000200, 
0x06230042, 0x80200008, 0x04200052, 0x06200042, 0x06020012, 0x02200052, 0x02210052, 0x06000040, 
0x06230052, 0x04220052, 0x80000008, 0x80000200, 0x10000022, 0x00200012, 0x00000610, 0x04000058, 
0x84230050, 0x10030022, 0x00230050, 0x86020000, 0x10000242, 0x16030210, 0x9021000a, 0x10020042, 
0x00200042, 0x16000000, 0x16200002, 0x04000052, 0x06000020, 0x00200210, 0x00010220, 0x00200230, 
0x02210002, 0x04230040, 0x10000240, 0x06200420, 0x90000400, 0x16230000, 0x10000408, 0x04020052, 
0x00200220, 0x82000420, 0x02200210, 0x00230040, 0x00000420, 0x06200040, 0x00000220, 0x00200000, 
0x00000400, 0x10030022, 0x00230050, 0x86020000, 0x10000242, 0x16030210, 0x9021000a, 0x10020042, 
0x00200042, 0x16000000, 0x16200002, 0x04000052, 0x06000020, 0x00200210, 0x00010220, 0x00200230, 
0x02210002, 0x04230040, 0x10000240, 0x06200420, 0x90000400, 0x16230000, 0x10000408, 0x04020052, 
0x00200220, 0x82000420, 0x02200210, 0x00200642, 0x80000008, 0x10200070, 0x10000212, 0x00000000, 
};

const uint32_t asciiB_c[] = {
0x04020052, 0x00000012, 0x00000052, 0x00200052, 0x02210232, 0x8022005a, 0x1000041a, 0x1000005a, 
0x10000400, 0x1002001a, 0x80000000, 0x10000008, 0x00000610, 0x00000052, 0x10000022, 0x80210002, 
0x02210012, 0x80000008, 0x80030008, 0x86030008, 0x10000620, 0x10220062, 0x0000001a, 0x0000005a, 
0x0020005a, 0x10200620, 0x80000000, 0x10000008, 0x00000610, 0x00000052, 0x10000022, 0x80210002, 
0x00000000, 0x00030000, 0x00010008, 0x8003005a, 0x8222005a, 0x9202063a, 0x04200478, 0x00000008, 
0x00000600, 0x10000020, 0x9000063a, 0x8000001a, 0x10000000, 0x00000012, 0x80000000, 0x10000200, 
0x16230240, 0x00030200, 0x04210052, 0x00230042, 0x02030012, 0x02200450, 0x06220052, 0x00230000, 
0x06230052, 0x02230052, 0x80000000, 0x10000008, 0x00000610, 0x00000052, 0x10000022, 0x80210002, 
0x0621004a, 0x06230012, 0x8023004a, 0x06200040, 0x80230048, 0x06200050, 0x06200010, 0x06220042, 
0x06030012, 0x80200048, 0x04030040, 0x06000610, 0x06000040, 0x06030220, 0x06030420, 0x06230040, 
0x06210012, 0x06230440, 0x06210412, 0x02220052, 0x80200008, 0x06030040, 0x16000200, 0x16030400, 
0x10000620, 0x02030052, 0x10200240, 0x06200040, 0x00000420, 0x00230040, 0x10000400, 0x00000040, 
0x00000020, 0x84000050, 0x06000450, 0x04000052, 0x10030042, 0x14000050, 0x80000212, 0x00030242, 
0x86000010, 0x80000000, 0x14000008, 0x80000608, 0x06000000, 0x84020012, 0x84000010, 0x04020052, 
0x06000030, 0x00030202, 0x04000010, 0x00000442, 0x06000050, 0x04020040, 0x14000000, 0x14020400, 
0x10000620, 0x0003004a, 0x10000050, 0x10200070, 0x80000008, 0x00200642, 0x10000212, 0x00000000, 
0x00000000, 0x00000012, 0x00000052, 0x00200052, 0x02210232, 0x8022005a, 0x1000041a, 0x10000252, 
0x10000400, 0x1002001a, 0x80000000, 0x10000008, 0x00000610, 0x00000052, 0x10000022, 0x80210002, 
0x04020052, 0x00000012, 0x04020410, 0x84020012, 0x00200018, 0x02010210, 0x80020042, 0x02200000, 
0x0221001a, 0x02200018, 0x80000000, 0x10000008, 0x00000610, 0x00000052, 0x10000022, 0x80210002, 
0x00000000, 0x00030000, 0x00010008, 0x8003005a, 0x8222005a, 0x9202063a, 0x04200478, 0x00000008, 
0x00000600, 0x10000020, 0x9000063a, 0x8000001a, 0x10000000, 0x00000012, 0x80000000, 0x10000200, 
0x06230050, 0x80000048, 0x00210052, 0x00230050, 0x02030012, 0x00220052, 0x04220052, 0x00230000, 
0x06230052, 0x02210052, 0x80000008, 0x10000008, 0x00000610, 0x00000052, 0x10000022, 0x80210002, 
0x0621004a, 0x06000610, 0x06200042, 0x02030008, 0x10200210, 0x16030202, 0x84000258, 0x02200210, 
0x00200050, 0x00030200, 0x00030250, 0x00210012, 0x00030400, 0x10000042, 0x14000400, 0x10000442, 
0x04020050, 0x06210040, 0x10200200, 0x00030460, 0x00000228, 0x06030240, 0x80000220, 0x02210012, 
0x10000440, 0x00020428, 0x10020042, 0x06200040, 0x00000420, 0x00230040, 0x10000400, 0x00000040, 
0x00000020, 0x06000610, 0x06200042, 0x02030008, 0x10200210, 0x16030202, 0x84000258, 0x02200210, 
0x00200050, 0x00030200, 0x00030250, 0x00210012, 0x00030400, 0x10000042, 0x14000400, 0x10000442, 
0x04020050, 0x06210040, 0x10200200, 0x00030460, 0x00000228, 0x06030240, 0x80000220, 0x02210012, 
0x10000440, 0x00020428, 0x10020042, 0x10200070, 0x80000008, 0x00200642, 0x10000212, 0x00000000, 
};

